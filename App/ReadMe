# ğŸš€ CalorieSnap - Complete Setup Guide

## âš¡ Was ist neu?

### Kompletter Rebuild mit:
âœ… **User Authentication** - Login/Signup System
âœ… **Supabase Database** - Cloud-Datenbank fÃ¼r alle User-Daten
âœ… **Fitness Advisor** - BMR, TDEE, personalisierte Kalorienziele
âœ… **Professionelles Design** - Basierend auf deinem Layout-Bild
âœ… **Modularer Code** - CSS getrennt, bessere Organisation
âœ… **Optimierte Performance** - Schnelleres Laden

---

## ğŸ“‹ Setup Schritte

### 1. Supabase Datenbank einrichten

#### A) Gehe zu deinem Supabase Dashboard:
https://supabase.com/dashboard/project/sfvovdpzhyubjctrdpwg

#### B) SQL Editor Ã¶ffnen:
1. Linke Sidebar â†’ "SQL Editor"
2. Klicke "New query"

#### C) Kopiere den kompletten Inhalt von `supabase_schema.sql`
3. FÃ¼ge das SQL ein
4. Klicke "Run" (â–¶ï¸ Button)
5. Warte bis "Success" erscheint

#### D) Verifiziere:
1. Gehe zu "Table Editor"
2. Du solltest sehen:
   - âœ… `users` Tabelle
   - âœ… `meals` Tabelle

### 2. Code-Struktur

```
CalorieSnap/
â”œâ”€â”€ app_new.py           # Neue Haupt-App (BENUTZEN!)
â”œâ”€â”€ app.py               # Alte Version (IGNORIEREN)
â”œâ”€â”€ database.py          # Supabase Integration
â”œâ”€â”€ styles.py            # CSS Styling
â”œâ”€â”€ requirements.txt     # Dependencies
â”œâ”€â”€ supabase_schema.sql  # Datenbank Schema
â””â”€â”€ README_NEW.md        # Diese Datei
```

### 3. Installation

```bash
# Virtual Environment
python -m venv venv
source venv/bin/activate  # Mac/Linux
venv\Scripts\activate     # Windows

# Dependencies installieren
pip install -r requirements.txt
```

### 4. App starten

```bash
# WICHTIG: Benutze app_new.py, NICHT app.py!
streamlit run app_new.py
```

---

## ğŸ¨ Neue Features im Detail

### 1. Landing Page
- Hero Section mit Call-to-Action
- Feature-Ãœbersicht (6 Features)
- Professionelles Design wie im Bild

### 2. User Authentication
- **Sign Up**:
  - Email + Password
  - Supabase Auth
  - Automatisches Profil erstellen

- **Login**:
  - Email + Password
  - Session Management
  - Sichere Speicherung

### 3. Dashboard
4 Tabs:

#### Tab 1: Dashboard
- Tagesfortschritt (Kalorien, Protein, Carbs, Fat)
- Fortschrittsbalken
- Liste aller heutigen Mahlzeiten
- Jede Mahlzeit mit LÃ¶schen-Button

#### Tab 2: Add Meal
- Foto hochladen
- AI-Analyse (Claude Vision)
- Ergebnisse anzeigen
- Speichern in Datenbank

#### Tab 3: Analytics
- WÃ¶chlicher Kalorien-Chart
- MakronÃ¤hrstoff-Verteilung
- Interaktive Plotly-Grafiken

#### Tab 4: Settings
- **PersÃ¶nliche Daten**:
  - Gewicht, GrÃ¶ÃŸe, Alter
  - Geschlecht
  - AktivitÃ¤tslevel
  - Fitnessziel (Abnehmen/Halten/Zunehmen)

- **Automatische Berechnungen**:
  - BMR (Grundumsatz)
  - TDEE (Gesamtumsatz)
  - Kalorienziel
  - Makro-Empfehlungen

### 4. Fitness Advisor Formeln

```python
# BMR (Mifflin-St Jeor Gleichung)
MÃ¤nner: BMR = (10 Ã— Gewicht kg) + (6.25 Ã— GrÃ¶ÃŸe cm) - (5 Ã— Alter) + 5
Frauen: BMR = (10 Ã— Gewicht kg) + (6.25 Ã— GrÃ¶ÃŸe cm) - (5 Ã— Alter) - 161

# TDEE (Total Daily Energy Expenditure)
TDEE = BMR Ã— AktivitÃ¤tsfaktor
- Sedentary: 1.2
- Light: 1.375
- Moderate: 1.55
- Active: 1.725
- Very Active: 1.9

# Kalorienziel
Abnehmen: TDEE - 500 kcal (ca. 0.5kg/Woche)
Halten: TDEE
Zunehmen: TDEE + 300 kcal (Lean Bulk)

# Makros
Abnehmen: 35% Protein, 25% Fett, 40% Carbs
Halten: 30% Protein, 30% Fett, 40% Carbs
Zunehmen: 30% Protein, 25% Fett, 45% Carbs
```

---

## ğŸ”’ Sicherheit & Privacy

### Supabase Row Level Security (RLS)
- User kÃ¶nnen nur ihre eigenen Daten sehen
- Automatisch aktiviert
- Keine manuelle Konfiguration nÃ¶tig

### Passwort-Sicherheit
- Mindestens 6 Zeichen
- Gehashed in Supabase
- Nie im Klartext gespeichert

---

## ğŸš€ Deployment auf Render

### 1. GitHub Repository aktualisieren

```bash
git add .
git commit -m "Complete rebuild with Supabase"
git push origin main
```

### 2. Render Einstellungen

**Build Command:**
```bash
pip install -r requirements.txt
```

**Start Command:**
```bash
streamlit run app_new.py --server.port=$PORT --server.address=0.0.0.0 --server.headless=true
```

### 3. Environment Variables (OPTIONAL)
Falls du API Key nicht in der App eingeben willst:

```
ANTHROPIC_API_KEY = dein_api_key
```

Dann in `app_new.py` Ã¤ndern:
```python
import os
if 'anthropic_api_key' not in st.session_state:
    st.session_state.anthropic_api_key = os.getenv('ANTHROPIC_API_KEY', '')
```

---

## ğŸ› Troubleshooting

### Fehler: "ModuleNotFoundError: No module named 'supabase'"
```bash
pip install supabase --break-system-packages
```

### Fehler: "Table users does not exist"
- Gehe zu Supabase SQL Editor
- FÃ¼hre `supabase_schema.sql` aus
- PrÃ¼fe ob Tabellen erstellt wurden

### Fehler: "Authentication failed"
- PrÃ¼fe ob Email korrekt ist
- Passwort mindestens 6 Zeichen
- Versuche anderen Browser

### Performance: "Streamlit lÃ¤dt langsam"
- Das ist beim ersten Start normal
- Nach dem Login ist es schneller
- Caching ist aktiviert

### Design sieht anders aus
- LÃ¶sche Browser Cache
- Hard Reload: Ctrl+Shift+R (Windows) / Cmd+Shift+R (Mac)
- PrÃ¼fe ob `styles.py` geladen wird

---

## ğŸ“Š Datenbank-Struktur

### Users Tabelle
```sql
id, user_id, email, full_name,
weight_kg, height_cm, age, gender,
daily_calorie_goal, activity_level, goal,
created_at, updated_at
```

### Meals Tabelle
```sql
id, user_id, food_name,
calories, protein, carbs, fat,
portion_size, confidence, image_url, meal_time,
created_at
```

---

## ğŸ¯ Wie man die App benutzt

### 1. Erstmalige Nutzung
```
1. Ã–ffne App â†’ Klicke "Sign Up Free"
2. Gib Name, Email, Passwort ein
3. Klicke "Create Account"
4. ZurÃ¼ck zu Login â†’ Einloggen
5. Gehe zu "Settings" Tab
6. Gib deine KÃ¶rperdaten ein
7. WÃ¤hle Fitnessziel
8. Klicke "Save Changes"
```

### 2. Mahlzeit hinzufÃ¼gen
```
1. Tab "Add Meal"
2. API Key eingeben (einmalig)
3. Foto hochladen
4. "Analyze with AI" klicken
5. Ergebnis prÃ¼fen
6. "Save Meal" klicken
```

### 3. Fortschritt tracken
```
1. Tab "Dashboard": Heute's Progress
2. Tab "Analytics": WÃ¶chlicher Verlauf
3. Statistiken anschauen
```

---

## ğŸ’¡ Tipps & Tricks

### Genauere AI-Erkennung
- Mache Foto von oben
- Gute Beleuchtung
- Nur ein Gericht pro Foto
- Nahe ran zoomen

### Kalorienziel optimieren
- Starte mit berechnetem Ziel
- Tracke 2 Wochen
- Passe an basierend auf Ergebnissen

### Best Practices
- Logge ALLE Mahlzeiten (auch Snacks!)
- Sei ehrlich bei PortionsgrÃ¶ÃŸen
- Checke tÃ¤glich dein Dashboard
- Nutze Analytics fÃ¼r Trends

---

## ğŸ”„ Migration von alter App

### Daten Ã¼bertragen?
- Alte App hatte keine Datenbank
- Neue App startet frisch
- Kein Datenverlust, da nichts gespeichert war

---

## ğŸ“± Mobile Nutzung

### Als App installieren
1. Ã–ffne im Handy-Browser
2. Chrome â†’ MenÃ¼ â†’ "Zum Homescreen hinzufÃ¼gen"
3. Safari â†’ Teilen â†’ "Zum Home-Bildschirm"
4. App-Icon erscheint!

### Kamera nutzen
- "Choose File" Button
- WÃ¤hle "Kamera"
- Foto machen
- Fertig!

---

## ğŸ†• ZukÃ¼nftige Features (Coming Soon)

- [ ] Barcode Scanner
- [ ] Rezepte speichern
- [ ] Gewichtstracking mit Chart
- [ ] Wasser-Tracking
- [ ] Meal Planning
- [ ] Social Features
- [ ] Export zu PDF
- [ ] Dark Mode
- [ ] Multi-Language

---

## ğŸ†˜ Support

### Bei Problemen:
1. PrÃ¼fe diese README
2. Schaue Supabase Logs an
3. Check Browser Console (F12)
4. Teste in Incognito Mode

### Supabase Dashboard
https://supabase.com/dashboard/project/sfvovdpzhyubjctrdpwg

---

## âœ… Quick Start Checklist

- [ ] Supabase Tabellen erstellt (SQL ausgefÃ¼hrt)
- [ ] Dependencies installiert (`pip install -r requirements.txt`)
- [ ] App gestartet (`streamlit run app_new.py`)
- [ ] Account erstellt (Sign Up)
- [ ] Eingeloggt
- [ ] Profil ausgefÃ¼llt (Settings)
- [ ] API Key eingegeben
- [ ] Erste Mahlzeit hinzugefÃ¼gt
- [ ] Dashboard gecheckt

**Alles erledigt? Du bist bereit! ğŸ‰**

---

## ğŸ“„ Lizenz & Credits

- **CalorieSnap** - AI-Powered Nutrition Tracker
- Built with: Streamlit, Supabase, Claude AI
- Version: 2.0 (Complete Rebuild)
- Date: 2026

---

**Viel Erfolg mit der neuen App! ğŸš€ğŸ’ª**